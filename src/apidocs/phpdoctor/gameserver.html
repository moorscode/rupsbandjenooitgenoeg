<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta name="generator" content="PHPDoctor 2RC4 (http://phpdoctor.sourceforge.net/)">
<meta name="when" content="Tue, 15 Dec 2009 11:06:27 +0100">

<link rel="stylesheet" type="text/css" href="../stylesheet.css">
<link rel="start" href="../overview-summary.html">

<title>GameServer (PHPDoctor)</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">

<div class="header">
<h1>PHPDoctor</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../phpdoctor/package-summary.html">Package</a></li>
<li class="active">Class</li>
<li><a href="../phpdoctor/package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../phpdoctor/gameserver.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<div class="qualifiedName">PHPDoctor.GameServer</div>
<div class="location">/assets/php/class.GameServer.php at line 9</div>

<h1>Class GameServer</h1>

<pre class="tree"><a href="../phpdoctor/socketserver.html">SocketServer</a><br>    └─<strong>GameServer</strong><br /></pre>

<hr>

<p class="signature">public  class <strong>GameServer</strong><br>extends <a href="../phpdoctor/socketserver.html">SocketServer</a>

</p>

<div class="comment" id="overview_description"><p>Game Server</p></div>

<hr>

<table id="summary_field">
<tr><th colspan="2">Field Summary</th></tr>
<tr>
<td class="type"> Games list</td>
<td class="description"><p class="name"><a href="#games">$games</a></p><p class="description"></p></td>
</tr>
<tr>
<td class="type"> Counter to make an unique new game id for each game</td>
<td class="description"><p class="name"><a href="#lastgame_id">$lastgame_id</a></p><p class="description"></p></td>
</tr>
</table>

<table class="inherit">
<tr><th colspan="2">Fields inherited from PHPDoctor.SocketServer</th></tr>
<tr><td><a href="../phpdoctor/socketserver.html#config_file">config_file</a>, <a href="../phpdoctor/socketserver.html#db">db</a>, <a href="../phpdoctor/socketserver.html#name">name</a>, <a href="../phpdoctor/socketserver.html#port">port</a>, <a href="../phpdoctor/socketserver.html#server">server</a></td></tr></table>

<table id="summary_constr">
<tr><th colspan="2">Constructor Summary</th></tr>
<tr>
<td class="description"><p class="name"><a href="#GameServer()">GameServer</a>()</p><p class="description">Create a new game server</p></td>
</tr>
</table>

<table id="summary_method">
<tr><th colspan="2">Method Summary</th></tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#check_for_winner()">check_for_winner</a>(mixed game_index)</p><p class="description">Check the gme if a winner is forced by default</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#client_connected()">client_connected</a>(int index)</p><p class="description">When a client connects to the server, set defaults</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#client_disconnect()">client_disconnect</a>(int index)</p><p class="description">When a client disconnects from the server, clean up</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#client_identified()">client_identified</a>(int index, boolean success)</p><p class="description">When a client has been identified</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#close_game()">close_game</a>(mixed game_index)</p><p class="description">Save the game statistics to the database</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#connect()">connect</a>()</p><p class="description">Custom implementation of the connect function</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#game_cleanup()">game_cleanup</a>(mixed game_index, mixed removeAll)</p><p class="description">Remove all clients from a game and reset their game related variables</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#get_client_index()">get_client_index</a>(mixed user_id)</p><p class="description">Get the client index from the database user id</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#get_game_index()">get_game_index</a>(mixed game_id)</p><p class="description">Get the game index for the specified game</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#leave_game()">leave_game</a>(mixed index)</p><p class="description">Leave the game the client is in or queued in</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#remove_from_game()">remove_from_game</a>(mixed game_index, mixed index)</p><p class="description">Remove player from the game because of a disconnect or quit</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#save_playerstats()">save_playerstats</a>(mixed index, mixed winner)</p><p class="description">Save player statistics</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#send()">send</a>(int index, mixed xml, mixed send_raw, mixed type, String data, boolean sendRaw)</p><p class="description">Send data to a specified client</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#send_all_gamelist()">send_all_gamelist</a>(mixed __exclude_index)</p><p class="description">Send the gamelist to everbody not in an active game</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#send_game_players()">send_game_players</a>(mixed game_id, mixed xml, mixed __exclude)</p><p class="description">Send to all players in a specified game</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#send_gamelist()">send_gamelist</a>(mixed client_index)</p><p class="description">Send the game list to a specific client</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#send_playerlist()">send_playerlist</a>(mixed game_index, mixed sendTo)</p><p class="description">Send an updated playerlist for a game queue to everybody not in an active game</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#send_players()">send_players</a>(mixed game_id, mixed xml, mixed __exclude, mixed type)</p><p class="description">Send to a specified group of players</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#send_queued_players()">send_queued_players</a>(mixed game_id, mixed xml, mixed __exclude)</p><p class="description">Send to all players queued in a specified game</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#send_to_all()">send_to_all</a>(mixed xml, mixed type, int data, int exclude_index)</p><p class="description">Send data to all the connected clients</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#time_game_end()">time_game_end</a>(mixed game_id, mixed client_id)</p><p class="description">Statistics: Save the total game time for this client</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#time_game_start()">time_game_start</a>(mixed game_id)</p><p class="description">Statistics: Set the start time for a game</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#time_queue_end()">time_queue_end</a>(mixed game_id, mixed client_index)</p><p class="description">Statistics: Save the time queued for a game</p></td>
</tr>
</table>

<table class="inherit">
<tr><th colspan="2">Methods inherited from PHPDoctor.SocketServer</th></tr>
<tr><td><a href="../phpdoctor/socketserver.html#client_connected()">client_connected</a>, <a href="../phpdoctor/socketserver.html#client_disconnect()">client_disconnect</a>, <a href="../phpdoctor/socketserver.html#client_identified()">client_identified</a>, <a href="../phpdoctor/socketserver.html#connect()">connect</a>, <a href="../phpdoctor/socketserver.html#on_input()">on_input</a>, <a href="../phpdoctor/socketserver.html#send()">send</a>, <a href="../phpdoctor/socketserver.html#send_to_all()">send_to_all</a>, <a href="../phpdoctor/socketserver.html#shutdown()">shutdown</a>, <a href="../phpdoctor/socketserver.html#wait_for_input()">wait_for_input</a></td></tr></table>

<h2 id="detail_field">Field Detail</h2>
<div class="location">/assets/php/class.GameServer.php at line 13</div>
<h3 id="games">games</h3>
<code class="signature">public  Games list <strong>$games</strong> = array()</code>
<div class="details">
<p></p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 18</div>
<h3 id="lastgame_id">lastgame_id</h3>
<code class="signature">public  Counter to make an unique new game id for each game <strong>$lastgame_id</strong></code>
<div class="details">
<p></p></div>

<hr>

<h2 id="detail_constr">Constructor Detail</h2>
<div class="location">/assets/php/class.GameServer.php at line 23</div>
<h3 id="GameServer()">GameServer</h3>
<code class="signature">public <strong>GameServer</strong>()</code>
<div class="details">
<p>Create a new game server</p></div>

<hr>

<h2 id="detail_method">Method Detail</h2>
<div class="location">/assets/php/class.GameServer.php at line 549</div>
<h3 id="check_for_winner()">check_for_winner</h3>
<code class="signature">public  void <strong>check_for_winner</strong>(mixed game_index)</code>
<div class="details">
<p>Check the gme if a winner is forced by default</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 378</div>
<h3 id="client_connected()">client_connected</h3>
<code class="signature">public  void <strong>client_connected</strong>(int index)</code>
<div class="details">
<p>When a client connects to the server, set defaults</p><dl>
<dt>Parameters:</dt>
<dd>index - Index of the client</dd>
</dl>
</div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 382</div>
<h3 id="client_disconnect()">client_disconnect</h3>
<code class="signature">public  void <strong>client_disconnect</strong>(int index)</code>
<div class="details">
<p>When a client disconnects from the server, clean up</p><dl>
<dt>Parameters:</dt>
<dd>index - Index of the client</dd>
</dl>
</div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 393</div>
<h3 id="client_identified()">client_identified</h3>
<code class="signature">public  void <strong>client_identified</strong>(int index, boolean success)</code>
<div class="details">
<p>When a client has been identified</p><dl>
<dt>Parameters:</dt>
<dd>index - Index of the client</dd>
<dd>success - If the client was identified or denied</dd>
</dl>
</div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 532</div>
<h3 id="close_game()">close_game</h3>
<code class="signature">public  void <strong>close_game</strong>(mixed game_index)</code>
<div class="details">
<p>Save the game statistics to the database</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 30</div>
<h3 id="connect()">connect</h3>
<code class="signature">public  void <strong>connect</strong>()</code>
<div class="details">
<p>Custom implementation of the connect function</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 633</div>
<h3 id="game_cleanup()">game_cleanup</h3>
<code class="signature">public  void <strong>game_cleanup</strong>(mixed game_index, mixed removeAll)</code>
<div class="details">
<p>Remove all clients from a game and reset their game related variables</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 785</div>
<h3 id="get_client_index()">get_client_index</h3>
<code class="signature">public  void <strong>get_client_index</strong>(mixed user_id)</code>
<div class="details">
<p>Get the client index from the database user id</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 797</div>
<h3 id="get_game_index()">get_game_index</h3>
<code class="signature">public  void <strong>get_game_index</strong>(mixed game_id)</code>
<div class="details">
<p>Get the game index for the specified game</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 468</div>
<h3 id="leave_game()">leave_game</h3>
<code class="signature">public  void <strong>leave_game</strong>(mixed index)</code>
<div class="details">
<p>Leave the game the client is in or queued in</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 493</div>
<h3 id="remove_from_game()">remove_from_game</h3>
<code class="signature">public  void <strong>remove_from_game</strong>(mixed game_index, mixed index)</code>
<div class="details">
<p>Remove player from the game because of a disconnect or quit</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 592</div>
<h3 id="save_playerstats()">save_playerstats</h3>
<code class="signature">public  void <strong>save_playerstats</strong>(mixed index, mixed winner)</code>
<div class="details">
<p>Save player statistics</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 770</div>
<h3 id="send()">send</h3>
<code class="signature">public  void <strong>send</strong>(int index, mixed xml, mixed send_raw, mixed type, String data, boolean sendRaw)</code>
<div class="details">
<p>Send data to a specified client</p><dl>
<dt>Parameters:</dt>
<dd>index - Index of the client</dd>
<dd>data - Data to send to the client</dd>
<dd>sendRaw - Embed XML around the data or not</dd>
</dl>
</div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 423</div>
<h3 id="send_all_gamelist()">send_all_gamelist</h3>
<code class="signature">public  void <strong>send_all_gamelist</strong>(mixed __exclude_index)</code>
<div class="details">
<p>Send the gamelist to everbody not in an active game</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 742</div>
<h3 id="send_game_players()">send_game_players</h3>
<code class="signature">public  void <strong>send_game_players</strong>(mixed game_id, mixed xml, mixed __exclude)</code>
<div class="details">
<p>Send to all players in a specified game</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 407</div>
<h3 id="send_gamelist()">send_gamelist</h3>
<code class="signature">public  void <strong>send_gamelist</strong>(mixed client_index)</code>
<div class="details">
<p>Send the game list to a specific client</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 438</div>
<h3 id="send_playerlist()">send_playerlist</h3>
<code class="signature">public  void <strong>send_playerlist</strong>(mixed game_index, mixed sendTo)</code>
<div class="details">
<p>Send an updated playerlist for a game queue to everybody not in an active game</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 756</div>
<h3 id="send_players()">send_players</h3>
<code class="signature">public  void <strong>send_players</strong>(mixed game_id, mixed xml, mixed __exclude, mixed type)</code>
<div class="details">
<p>Send to a specified group of players</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 749</div>
<h3 id="send_queued_players()">send_queued_players</h3>
<code class="signature">public  void <strong>send_queued_players</strong>(mixed game_id, mixed xml, mixed __exclude)</code>
<div class="details">
<p>Send to all players queued in a specified game</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 778</div>
<h3 id="send_to_all()">send_to_all</h3>
<code class="signature">public  void <strong>send_to_all</strong>(mixed xml, mixed type, int data, int exclude_index)</code>
<div class="details">
<p>Send data to all the connected clients</p><dl>
<dt>Parameters:</dt>
<dd>data - Data to send to the clients</dd>
<dd>exclude_index - Exclude a client from recieving the data (Default: -1)</dd>
</dl>
</div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 707</div>
<h3 id="time_game_end()">time_game_end</h3>
<code class="signature">public  void <strong>time_game_end</strong>(mixed game_id, mixed client_id)</code>
<div class="details">
<p>Statistics: Save the total game time for this client</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 688</div>
<h3 id="time_game_start()">time_game_start</h3>
<code class="signature">public  void <strong>time_game_start</strong>(mixed game_id)</code>
<div class="details">
<p>Statistics: Set the start time for a game</p></div>

<hr>

<div class="location">/assets/php/class.GameServer.php at line 652</div>
<h3 id="time_queue_end()">time_queue_end</h3>
<code class="signature">public  void <strong>time_queue_end</strong>(mixed game_id, mixed client_index)</code>
<div class="details">
<p>Statistics: Save the time queued for a game</p></div>

<hr>

<div class="header">
<h1>PHPDoctor</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../phpdoctor/package-summary.html">Package</a></li>
<li class="active">Class</li>
<li><a href="../phpdoctor/package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../phpdoctor/gameserver.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://phpdoctor.sourceforge.net/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>